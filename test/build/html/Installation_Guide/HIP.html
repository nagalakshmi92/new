

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>HIP &mdash; ReadTheDocs-Breathe 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> ReadTheDocs-Breathe
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../ROCm.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Current_Release_Notes/Current-Release-Notes.html">Current Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation-Guide.html">ROCm Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Programming_Guides/Programming-Guides.html">Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ROCm_GPU_Tunning_Guides/ROCm-GPU-Tunning-Guides.html">ROCm GPU Tuning Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GCN_ISA_Manuals/GCN-ISA-Manuals.html">GCN ISA Manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ROCm_API_References/ROCm-API-References.html">ROCm API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ROCm_Tools/ROCm-Tools.html">ROCm Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ROCm_Libraries/ROCm_Libraries.html">ROCm Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ROCm_Compiler_SDK/ROCm-Compiler-SDK.html">ROCm Compiler SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ROCm_System_Managment/ROCm-System-Managment.html">ROCm System Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ROCm_Virtualization_Containers/ROCm-Virtualization-&amp;-Containers.html">ROCm Virtualization &amp; Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Remote_Device_Programming/Remote-Device-Programming.html">Remote Device Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Deep_learning/Deep-learning.html">Deep Learning on ROCm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Other_Solutions/Other-Solutions.html">System Level Debug</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorial/Tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ROCm_Glossary/ROCm-Glossary.html">ROCm Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ReadTheDocs-Breathe</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>HIP</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Installation_Guide/HIP.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hip">
<span id="rocm-developer-tool-hip"></span><h1>HIP<a class="headerlink" href="#hip" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-this-repository-for">
<h2>What is this repository for?<a class="headerlink" href="#what-is-this-repository-for" title="Permalink to this headline">¶</a></h2>
<p>HIP allows developers to convert CUDA code to portable C++. The same source code can be compiled to run on NVIDIA or AMD GPUs. Key features include:</p>
<blockquote>
<div><ul class="simple">
<li>HIP is very thin and has little or no performance impact over coding directly in CUDA or hcc “HC” mode.</li>
<li>HIP allows coding in a single-source C++ programming language including features such as templates, C++11 lambdas, classes, namespaces, and more.</li>
<li>HIP allows developers to use the “best” development environment and tools on each target platform.</li>
<li>The “hipify” tool automatically converts source from CUDA to HIP.</li>
<li>Developers can specialize for the platform (CUDA or hcc) to tune for performance or handle tricky cases</li>
</ul>
</div></blockquote>
<p>New projects can be developed directly in the portable HIP C++ language and can run on either NVIDIA or AMD platforms. Additionally, HIP provides porting tools which make it easy to port existing CUDA codes to the HIP layer, with no loss of performance as compared to the original CUDA application. HIP is not intended to be a drop-in replacement for CUDA, and developers should expect to do some manual coding and performance tuning work to complete the port.</p>
</div>
<div class="section" id="repository-branches">
<h2>Repository branches:<a class="headerlink" href="#repository-branches" title="Permalink to this headline">¶</a></h2>
<p>The HIP repository maintains several branches. The branches that are of importance are:</p>
<blockquote>
<div><ul class="simple">
<li>master branch: This is the stable branch. All stable releases are based on this branch.</li>
<li>developer-preview branch: This is the branch were the new features still under development are visible. While this maybe of interest to many, it should be noted that this branch and the features under development might not be stable.</li>
</ul>
</div></blockquote>
<div class="section" id="release-tagging">
<h3>Release tagging:<a class="headerlink" href="#release-tagging" title="Permalink to this headline">¶</a></h3>
<p>HIP releases are typically of two types. The tag naming convention is different for both types of releases to help differentiate them.</p>
<ul class="simple">
<li>release_x.yy.zzzz: These are the stable releases based on the master branch. This type of release is typically made once a month.</li>
<li>preview_x.yy.zzzz: These denote pre-release code and are based on the developer-preview branch. This type of release is typically made once a week.</li>
</ul>
</div>
</div>
<div class="section" id="more-info">
<h2>More Info:<a class="headerlink" href="#more-info" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>Installation</li>
<li>HIP FAQ</li>
<li>HIP Kernel Language</li>
<li>HIP Runtime API (Doxygen)</li>
<li>HIP Porting Guide</li>
<li>HIP Porting Driver Guide</li>
<li>HIP Programming Guide</li>
<li>HIP Profiling</li>
<li>HIP Debugging</li>
<li>HIP Terminology (including Rosetta Stone of GPU computing terms across CUDA/HIP/HC/AMP/OpenL)</li>
<li>hipify-clang</li>
<li>Developer/CONTRIBUTING Info</li>
<li>Release Notes</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="how-do-i-get-set-up">
<h2>How do I get set up?<a class="headerlink" href="#how-do-i-get-set-up" title="Permalink to this headline">¶</a></h2>
<p>See the <a class="reference external" href="https://github.com/ROCm-Developer-Tools/HIP/blob/roc-1.7.x/INSTALL.md">Installation</a> notes.</p>
</div>
<div class="section" id="simple-example">
<h2>Simple Example<a class="headerlink" href="#simple-example" title="Permalink to this headline">¶</a></h2>
<p>The HIP API includes functions such as hipMalloc, hipMemcpy, and hipFree.
Programmers familiar with CUDA will also be able to quickly learn and start coding with the HIP API. Compute kernels are launched with the “hipLaunchKernel” macro call. Here is simple example showing a snippet of HIP API code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hipMalloc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">A_d</span><span class="p">,</span> <span class="n">Nbytes</span><span class="p">));</span>
<span class="n">hipMalloc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">C_d</span><span class="p">,</span> <span class="n">Nbytes</span><span class="p">));</span>

<span class="n">hipMemcpy</span><span class="p">(</span><span class="n">A_d</span><span class="p">,</span> <span class="n">A_h</span><span class="p">,</span> <span class="n">Nbytes</span><span class="p">,</span> <span class="n">hipMemcpyHostToDevice</span><span class="p">);</span>

<span class="n">const</span> <span class="n">unsigned</span> <span class="n">blocks</span> <span class="o">=</span> <span class="mi">512</span><span class="p">;</span>
<span class="n">const</span> <span class="n">unsigned</span> <span class="n">threadsPerBlock</span> <span class="o">=</span> <span class="mi">256</span><span class="p">;</span>
<span class="n">hipLaunchKernel</span><span class="p">(</span><span class="n">vector_square</span><span class="p">,</span>   <span class="o">/*</span> <span class="n">compute</span> <span class="n">kernel</span><span class="o">*/</span>
                <span class="n">dim3</span><span class="p">(</span><span class="n">blocks</span><span class="p">),</span> <span class="n">dim3</span><span class="p">(</span><span class="n">threadsPerBlock</span><span class="p">),</span> <span class="mi">0</span><span class="o">/*</span><span class="n">dynamic</span> <span class="n">shared</span><span class="o">*/</span><span class="p">,</span> <span class="mi">0</span><span class="o">/*</span><span class="n">stream</span><span class="o">*/</span><span class="p">,</span>     <span class="o">/*</span> <span class="n">launch</span> <span class="n">config</span><span class="o">*/</span>
                <span class="n">C_d</span><span class="p">,</span> <span class="n">A_d</span><span class="p">,</span> <span class="n">N</span><span class="p">);</span>  <span class="o">/*</span> <span class="n">arguments</span> <span class="n">to</span> <span class="n">the</span> <span class="n">compute</span> <span class="n">kernel</span> <span class="o">*/</span>

<span class="n">hipMemcpy</span><span class="p">(</span><span class="n">C_h</span><span class="p">,</span> <span class="n">C_d</span><span class="p">,</span> <span class="n">Nbytes</span><span class="p">,</span> <span class="n">hipMemcpyDeviceToHost</span><span class="p">);</span>
</pre></div>
</div>
<p>The HIP kernel language defines builtins for determining grid and block coordinates, math functions, short vectors, atomics, and timer functions. It also specifies additional defines and keywords for function types, address spaces, and optimization controls. (See the HIP Kernel Language for a full description). Here’s an example of defining a simple ‘vector_square’ kernel.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="o">&lt;</span><span class="n">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="n">__global__</span> <span class="n">void</span>
<span class="n">vector_square</span><span class="p">(</span><span class="n">T</span> <span class="o">*</span><span class="n">C_d</span><span class="p">,</span> <span class="n">const</span> <span class="n">T</span> <span class="o">*</span><span class="n">A_d</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">N</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">size_t</span> <span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">hipBlockIdx_x</span> <span class="o">*</span> <span class="n">hipBlockDim_x</span> <span class="o">+</span> <span class="n">hipThreadIdx_x</span><span class="p">);</span>
    <span class="n">size_t</span> <span class="n">stride</span> <span class="o">=</span> <span class="n">hipBlockDim_x</span> <span class="o">*</span> <span class="n">hipGridDim_x</span> <span class="p">;</span>

   <span class="k">for</span> <span class="p">(</span><span class="n">size_t</span> <span class="n">i</span><span class="o">=</span><span class="n">offset</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="p">;</span> <span class="n">i</span><span class="o">+=</span><span class="n">stride</span><span class="p">)</span> <span class="p">{</span>
       <span class="n">C_d</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">A_d</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">A_d</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The HIP Runtime API code and compute kernel definition can exist in the same source file - HIP takes care of generating host and device code appropriately.</p>
<p>HIP C++ code can be compiled with either :</p>
<blockquote>
<div><ul class="simple">
<li>On the NVIDIA CUDA platform, HIP provides header file which translate from the HIP runtime APIs to CUDA runtime APIs. The header file contains mostly inlined functions and thus has very low overhead - developers coding in HIP should expect the same performance as coding in native CUDA. The code is then compiled with nvcc, the standard C++ compiler provided with the CUDA SDK. Developers can use any tools supported by the CUDA SDK including the CUDA profiler and debugger.</li>
<li>On the AMD ROCm platform, HIP provides a header and runtime library built on top of hcc compiler. The HIP runtime implements HIP streams, events, and memory APIs, and is a object library that is linked with the application. The source code for all headers and the library implementation is available on GitHub.
HIP developers on ROCm can use AMD’s CodeXL for debugging and profiling.</li>
</ul>
</div></blockquote>
<p>Thus HIP source code can be compiled to run on either platform. Platform-specific features can be isolated to a specific platform using conditional compilation. Thus HIP provides source portability to either platform. HIP provides the hipcc compiler driver which will call the appropriate toolchain depending on the desired platform.</p>
</div>
<div class="section" id="examples-and-getting-started">
<h2>Examples and Getting Started:<a class="headerlink" href="#examples-and-getting-started" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>A sample and <a class="reference external" href="http://gpuopen.com/hip-to-be-squared-an-introductory-hip-tutorial">blog</a> that uses hipify to convert a simple app from CUDA to HIP:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">samples</span><span class="o">/</span><span class="mi">01</span><span class="n">_Intro</span><span class="o">/</span><span class="n">square</span>
<span class="c1"># follow README / blog steps to hipify the application.</span>
</pre></div>
</div>
<ul class="simple">
<li>A sample and <a class="reference external" href="http://gpuopen.com/platform-aware-coding-inside-hip/">blog</a> demonstrating platform specialization:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">samples</span><span class="o">/</span><span class="mi">01</span><span class="n">_Intro</span><span class="o">/</span><span class="n">bit_extract</span>
<span class="n">make</span>
</pre></div>
</div>
<ul class="simple">
<li>Guide to <a class="reference external" href="https://github.com/ROCm-Developer-Tools/HIP/blob/roc-1.7.x/docs/markdown/hip_porting_guide.md#porting-a-new-cuda-project%22">Porting a New Cuda Project</a></li>
</ul>
<div class="section" id="more-examples">
<h3>More Examples<a class="headerlink" href="#more-examples" title="Permalink to this headline">¶</a></h3>
<p>The GitHub repository <a class="reference external" href="https://github.com/ROCm-Developer-Tools/HIP-Examples.git">HIP-Examples</a> contains a hipified version of the popular Rodinia benchmark suite. The README with the procedures and tips the team used during this porting effort is here: <a class="reference external" href="https://github.com/ROCm-Developer-Tools/HIP-Examples/blob/master/rodinia_3.0/hip/README.hip_porting">Rodinia Porting Guide</a></p>
</div>
</div>
<div class="section" id="tour-of-the-hip-directories">
<h2>Tour of the HIP Directories<a class="headerlink" href="#tour-of-the-hip-directories" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p class="first"><strong>Include:</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>hip_runtime_api.h</strong> : Defines HIP runtime APIs and can be compiled with many standard Linux compilers (hcc, GCC, ICC, CLANG, etc), in either C or C++ mode.</li>
<li><strong>hip_runtime.h</strong> : Includes everything in hip_runtime_api.h PLUS hipLaunchKernel and syntax for writing device kernels and device functions. hip_runtime.h can only be compiled with hcc.</li>
<li><strong>hcc_detail/**</strong> , <strong>*nvcc_detail/**</strong> : Implementation details for specific platforms. HIP applications should not include these files directly.</li>
<li><strong>hcc.h</strong> : Includes interop APIs for HIP and HCC</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>bin</strong>: Tools and scripts to help with hip porting</p>
<blockquote>
<div><ul class="simple">
<li><strong>hipify</strong> : Tool to convert CUDA code to portable CPP. Converts CUDA APIs and kernel builtins.</li>
<li><strong>hipcc</strong> : Compiler driver that can be used to replace nvcc in existing CUDA code. hipcc will call nvcc or hcc depending on platform, and include appropriate platform-specific headers and libraries.</li>
<li><strong>hipconfig</strong> : Print HIP configuration (HIP_PATH, HIP_PLATFORM, CXX config flags, etc)</li>
<li><strong>hipexamine.sh</strong> : Script to scan directory, find all code, and report statistics on how much can be ported with HIP (and identify likely features not yet supported)</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>doc</strong>: Documentation - markdown and doxygen info</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="reporting-an-issue">
<h2>Reporting an issue<a class="headerlink" href="#reporting-an-issue" title="Permalink to this headline">¶</a></h2>
<p>Use the <a class="reference external" href="https://github.com/ROCm-Developer-Tools/HIP/issues">GitHub issue tracker</a>. If reporting a bug, include the output of “hipconfig –full” and samples/1_hipInfo/hipInfo (if possible).</p>
<p>For More Info checkout GitHub Link <a class="reference external" href="https://github.com/ROCm-Developer-Tools/HIP/tree/roc-1.7.x">here</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Thomas Edvalson.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>